{"requestURL":"https://t24mobile.com/scripts/controllers/profileCtrl.js","requestMethod":"GET","requestHeaders":{"Referer":"https://t24mobile.com/","User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36"},"responseURL":"https://t24mobile.com/scripts/controllers/profileCtrl.js","responseStatus":200,"responseStatusText":"OK","responseProtocol":"http/1.1","responseBody":"t24App.controller('profileCtrl', ['$scope','$cookieStore','appService','authService','$log','$rootScope','$state','$window', function($scope,$cookieStore,appService,authService,$log,$rootScope,$state,$window){\r\n\t\r\n\tconsole.log('profileCtrl');\r\n\tvar appToken = $cookieStore.get('appToken');//$rootScope.globals.currentUser.registeredID;\r\n\tvar mobileNo = $cookieStore.get('globals').currentUser.registeredID;\r\n\t$scope.loggedIn = $cookieStore.get('userloggedIn');\r\n\tvar s =  $cookieStore.get('invisible');\r\n\t$scope.invisible = s;\r\n\t//$cookieStore.get('globals');\r\n\t//console.log(appToken , $cookieStore.get('globals').currentUser.registeredID);\r\n\t$scope.loadCustomerProfile = function(){\r\n\t\tappService.getProfile(mobileNo,appToken,function(response){\r\n\t\t\tif(response.isSuccessful == true){\r\n\t\t\t\t$scope.customerDetails = response.data;\r\n\t\t\t}else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                //$log.log(response.msgDesc);\r\n                if ($scope.loggedIn == 1) {\r\n                    $scope.invisible = !s; //!authService.invisible;\r\n                    $cookieStore.put('invisible', !s);\r\n                    $cookieStore.put('userloggedIn', 0);\r\n                    authService.clearCredentials();\r\n                    $window.alert('Session Expired ! Please login again.');\r\n                    $state.go('home');\r\n\r\n                } else {\r\n                    $window.alert('Session Expired ! Click OK to start session again');\r\n                    $state.go('home');\r\n                }\r\n            }\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.loadCustomerProfile();\r\n\t\r\n\t$scope.msgShow = false;\r\n\t$scope.msgShowErr = false;\r\n\t$scope.editSave = function(form,custToken){\r\n\t\tconsole.log(form,custToken);\r\n\t\tappService.updateProfile(mobileNo,form,custToken,function(response){\r\n\t\t\tconsole.log(response.msgDesc);\r\n\t\t\tif (response.msgDesc == \"Succesfully Updated\") {\r\n\t\t\t\t//setTimeout(function(){\t\t\t\t\t\r\n\t\t\t\t\t$scope.msgShow = true;\r\n\t\t\t\t\t$scope.msg = response.msgDesc;\r\n\t\t\t\t//},5000);\r\n\t\t\t}else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                //$log.log(response.msgDesc);\r\n                if ($scope.loggedIn == 1) {\r\n                    $scope.invisible = !s; //!authService.invisible;\r\n                    $cookieStore.put('invisible', !s);\r\n                    $cookieStore.put('userloggedIn', 0);\r\n                    authService.clearCredentials();\r\n                    $window.alert('Session Expired ! Please login again.');\r\n                    $state.go('home');\r\n\r\n                } else {\r\n                    $window.alert('Session Expired ! Click OK to start session again');\r\n                    $state.go('home');\r\n                }\r\n            }else{\r\n\t\t\t\t$scope.msgShowErr = true;\r\n\t\t\t\t$scope.msg = response.msgDesc;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}]);\r\n","responseBase64":false,"responseHeaders":{"Date":"Fri, 26 May 2017 20:00:28 GMT","Content-Encoding":"gzip","ETag":"\"121c48d7d88cd21:0\"","Last-Modified":"Wed, 22 Feb 2017 06:56:49 GMT","Server":"Microsoft-IIS/7.5","X-Powered-By":"ASP.NET","Vary":"Accept-Encoding","Content-Type":"application/x-javascript","Access-Control-Allow-Origin":"*","Accept-Ranges":"bytes","Content-Length":"934"}}