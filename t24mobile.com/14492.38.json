{"requestURL":"https://t24mobile.com/scripts/controllers/talkCtrl.js","requestMethod":"GET","requestHeaders":{"Referer":"https://t24mobile.com/","User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36"},"responseURL":"https://t24mobile.com/scripts/controllers/talkCtrl.js","responseStatus":200,"responseStatusText":"OK","responseProtocol":"http/1.1","responseBody":"t24App.controller('talkCtrl', function($scope, $state, appService,authService, $rootScope, $cookieStore, $stateParams, $uibModal, $log, $window) {\r\n\r\n    var appToken = $cookieStore.get('appToken'); //.currentUser.appToken;\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\r\n    //$scope.mobileNo = $cookieStore.get('globals').currentUser.registeredID;\r\n    $scope.dynamicPopover = {\r\n        // content: 'USSD / SMS Activation',\r\n        templateUrl: 'myPopoverTemplate.html',\r\n        title: 'USSD / SMS Activation'\r\n    };\r\n    $scope.operator = \"TOPUP\";\r\n    $scope.circle = \"CIR001\";\r\n    $scope.errorToken = false;\r\n\r\n    $scope.TwoGData = [], $scope.ThreeGData = [], $scope.TopUp = [], $scope.ComboPacks = [], $scope.IntRoaming = [], $scope.NaRoaming = [],\r\n        $scope.moreFTT = [], $scope.fTT = [], $scope.MinutePacks = [], $scope.STDPacks = [], $scope.LocalPacks = [];\r\n\r\n    $scope.loader = true;\r\n    $scope.errorloader = false;\r\n    Array.prototype.contains = function(v) {\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (this[i] === v) return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Array.prototype.unique = function() {\r\n        var arr = [];\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (!arr.contains(this[i])) {\r\n                arr.push(this[i]);\r\n            }\r\n        }\r\n        return arr;\r\n    };\r\n    $scope.categ = [];\r\n\r\n    $scope.allCircles = [\r\n        { 'id': 'CIR001', 'name': 'Delhi' },\r\n        { 'id': 'CIR002', 'name': 'Mumbai' },\r\n        { 'id': 'CIR003', 'name': 'Chennai' },\r\n        { 'id': 'CIR004', 'name': 'Kolkata' },\r\n        { 'id': 'CIR005', 'name': 'Maharashtra' },\r\n        { 'id': 'CIR006', 'name': 'Gujarat' },\r\n        { 'id': 'CIR007', 'name': 'Andhra Pradesh' },\r\n        { 'id': 'CIR008', 'name': 'Karnataka' },\r\n        { 'id': 'CIR009', 'name': 'Tamil Nadu' },\r\n        { 'id': 'CIR010', 'name': 'Kerala' },\r\n        { 'id': 'CIR011', 'name': 'Punjab' },\r\n        { 'id': 'CIR012', 'name': 'Haryana' },\r\n        { 'id': 'CIR013', 'name': 'Uttar Pradesh (West)' },\r\n        { 'id': 'CIR014', 'name': 'Uttar Pradesh (East)' },\r\n        { 'id': 'CIR015', 'name': 'Rajasthan' },\r\n        { 'id': 'CIR016', 'name': 'Madhya Pradesh' },\r\n        { 'id': 'CIR017', 'name': 'West Bengal& AN Island' },\r\n        { 'id': 'CIR018', 'name': 'Himachal Pradesh' },\r\n        { 'id': 'CIR018', 'name': 'Bihar & Jharkhand' },\r\n        { 'id': 'CIR020', 'name': 'Orissa' },\r\n        { 'id': 'CIR021', 'name': 'Assam' },\r\n        { 'id': 'CIR022', 'name': 'Northeast' },\r\n        { 'id': 'CIR023', 'name': 'J&K' },\r\n        { 'id': 'CIR024', 'name': 'Uttaranchal' }\r\n    ];\r\n\r\n    $scope.loader = false;\r\n    $scope.selectCircle = true;\r\n    $scope.loadGetStvList = function(circleId) {\r\n        $scope.selectCircle = false;\r\n        $scope.loader = true;\r\n        appService.getStvList(appToken, 'T24', circleId, function(response) {\r\n            $log.log(response);\r\n            //response.isSuccessful = false;\r\n            if (response.isSuccessful == true) {\r\n                console.log('success');\r\n                $scope.loader = false;\r\n                angular.forEach(response.data, function(value, key) {\r\n\r\n                    $scope.res = response.data;\r\n                    var sub = value.subCategory.trim();\r\n                    var cat = value.category.trim();\r\n\r\n                    //$scope.subCat.push(sub);\r\n                    $scope.categ.push(cat);\r\n                    $scope.gotwog(0, $scope.res[0].category);\r\n\r\n                    $scope.headercontents = $scope.categ.unique();\r\n                });\r\n            }else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                //$log.log(response.msgDesc);\r\n                if ($scope.loggedIn == 1) {\r\n                    $scope.invisible = !s; //!authService.invisible;\r\n                    $cookieStore.put('invisible', !s);\r\n                    $cookieStore.put('userloggedIn', 0);\r\n                    authService.clearCredentials();\r\n                    $window.alert('Session Expired ! Please login again.');\r\n                    $state.go('home');\r\n\r\n                } else {\r\n                    $window.alert('Session Expired ! Click OK to start session again');\r\n                    $state.go('home');\r\n                }\r\n            }\r\n            else {\r\n                console.log('error');\r\n                $scope.errorloader = true;\r\n                $scope.loader = false;\r\n            }\r\n        });\r\n    };\r\n    //$scope.loadGetStvList('');\r\n\r\n    if (angular.isUndefined($cookieStore.get('globals'))) {\r\n        $scope.val = true;\r\n    } else {\r\n        $scope.val = false;\r\n    }\r\n\r\n    $scope.gotwog = function(index, selectedCat) {\r\n        $scope.catselected = index;\r\n        $scope.subCat = [];\r\n        angular.forEach($scope.res, function(k, v) {\r\n            if (k.category.trim() == selectedCat) {\r\n                var sub = k.subCategory.trim();\r\n                if (k.category.trim() == 'ComboPacks') {\r\n                    sub = k.subCategory.substring(0, 2);\r\n                }\r\n                $scope.subCat.push(sub);\r\n                $scope.gosubcat(0, $scope.subCat[0]);\r\n            }\r\n            $scope.subheadercontents = $scope.subCat.unique();\r\n        });\r\n\r\n    };\r\n\r\n    $scope.gosubcat = function(index, selectedSubCat) {\r\n        $scope.subcatselected = index;\r\n        $scope.categories = [];\r\n        angular.forEach($scope.res, function(k, v) {\r\n            if (k.category.trim() == 'ComboPacks') {\r\n                if (k.subCategory.substring(0, 2) == selectedSubCat.trim()) {\r\n                    $scope.categories.push(k);\r\n                }\r\n            } else if (k.subCategory.trim() == selectedSubCat.trim()) {\r\n\r\n                $scope.categories.push(k);\r\n            }\r\n        });\r\n        $state.go('twog', { 'promoCode': $stateParams.promoCode });\r\n    };\r\n\r\n    // $scope.closePopover = function () {\r\n    //   $log.log($scope.isOpen);\r\n    //   $scope.isOpen = false;  \r\n    // };\r\n});\r\n","responseBase64":false,"responseHeaders":{"Date":"Fri, 26 May 2017 20:00:29 GMT","Content-Encoding":"gzip","ETag":"\"887bcb19db8cd21:0\"","Last-Modified":"Wed, 22 Feb 2017 07:13:00 GMT","Server":"Microsoft-IIS/7.5","X-Powered-By":"ASP.NET","Vary":"Accept-Encoding","Content-Type":"application/x-javascript","Access-Control-Allow-Origin":"*","Accept-Ranges":"bytes","Content-Length":"2064"}}