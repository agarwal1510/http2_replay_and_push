{"requestURL":"https://t24mobile.com/scripts/controllers/popupCtrl.js","requestMethod":"GET","requestHeaders":{"Referer":"https://t24mobile.com/","User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36"},"responseURL":"https://t24mobile.com/scripts/controllers/popupCtrl.js","responseStatus":200,"responseStatusText":"OK","responseProtocol":"http/1.1","responseBody":"t24App.controller('popupCtrl', ['$scope', '$uibModal', '$cookieStore', '$location', '$state', '$window', '$timeout', function($scope, $uibModal, $cookieStore, $location, $state, $window, $timeout) {\r\n    // alert($('body').attr('class'));\r\n    //$scope.invisible = true;\r\n\r\n    /*$scope.myAccount = function (id) {\r\n        //$scope.invisible = !id;\r\n        //$state.go('profile');\r\n    };*/\r\n    $scope.open = function(id, n) {\r\n        //debugger;\r\n\r\n        console.log($cookieStore.get('userloggedIn'));\r\n        if ($cookieStore.get('userloggedIn') === 1) {\r\n            return false;\r\n        }\r\n        console.log('opening pop up', id);\r\n        var modalInstance = $uibModal.open({\r\n            templateUrl: 'views/loginPopUp.html',\r\n            controller: 'ModalLoginPopupInstanceCtrl',\r\n            resolve: {\r\n                id: function() {\r\n                    return id;\r\n                },\r\n                n: function() {\r\n                    return n;\r\n                }\r\n            }\r\n        });\r\n        modalInstance.result.then(function(selectedItem) {\r\n            $scope.selected = selectedItem;\r\n        }, function() {\r\n\r\n        });\r\n\r\n    }\r\n    $scope.openloginTalk = function(id, n) {\r\n        //debugger;\r\n        console.log($cookieStore.get('userloggedIn'));\r\n        if ($cookieStore.get('userloggedIn') === 1) {\r\n            //$location.path('/twog');\r\n            $state.go('twog', {});\r\n            //$window.location.reload();\r\n            return false;\r\n        }\r\n        var modalInstance = $uibModal.open({\r\n            templateUrl: 'views/loginPopUp.html',\r\n            controller: 'ModalLoginPopupHeaderInstanceCtrl',\r\n            resolve: {\r\n                id: function() {\r\n                    return id;\r\n                },\r\n                n: function() {\r\n                    return n;\r\n                }\r\n            }\r\n        });\r\n        modalInstance.result.then(function(selectedItem) {\r\n            $scope.selected = selectedItem;\r\n        }, function() {\r\n\r\n        });\r\n    }\r\n    $scope.openloginShop = function(id, n) {\r\n        console.log($cookieStore.get('userloggedIn'));\r\n        if ($cookieStore.get('userloggedIn') === 1) {\r\n            //$location.path('/shop');\r\n            $state.go('shop', {});\r\n            //$window.location.reload();\r\n            return false;\r\n        }\r\n        var modalInstance = $uibModal.open({\r\n            templateUrl: 'views/loginPopUp.html',\r\n            controller: 'ModalLoginPopupHeaderShopInstanceCtrl',\r\n            resolve: {\r\n                id: function() {\r\n                    return id;\r\n                },\r\n                n: function() {\r\n                    return n;\r\n                }\r\n            }\r\n        });\r\n        modalInstance.result.then(function(selectedItem) {\r\n            $scope.selected = selectedItem;\r\n        }, function() {\r\n\r\n        });\r\n    };\r\n    $scope.registerPopUp = function(id, n) {\r\n        console.log('opening pop up');\r\n        var modalInstance = $uibModal.open({\r\n            templateUrl: 'registerPopUp.html',\r\n            controller: 'ModalRegisterPopUpInstanceCtrl',\r\n            resolve: {\r\n                id: function() {\r\n                    return id;\r\n                },\r\n                n: function() {\r\n                    return n;\r\n                }\r\n            }\r\n        });\r\n        modalInstance.result.then(function(selectedItem) {\r\n            $scope.selected = selectedItem;\r\n        }, function() {\r\n\r\n        });\r\n    }\r\n    $scope.rechargePopUP = function(mobileNo, rechargeType, amount, operator, circle) {\r\n        console.log('opening pop up');\r\n        var modalInstance = $uibModal.open({\r\n            templateUrl: 'views/rechargePopUp.html',\r\n            controller: 'ModalRechargePopUpInstanceCtrl',\r\n            resolve: {\r\n                mobileNo: function() {\r\n                    return mobileNo;\r\n                },\r\n                rechargeType: function() {\r\n                    return rechargeType;\r\n                },\r\n                amount: function() {\r\n                    return amount;\r\n                },\r\n                operator: function() {\r\n                    return operator;\r\n                },\r\n                circle: function() {\r\n                    return circle;\r\n                }\r\n            }\r\n        });\r\n        modalInstance.result.then(function(selectedItem) {\r\n            $scope.selected = selectedItem;\r\n        }, function() {\r\n\r\n        });\r\n    }\r\n}]);\r\n\r\nt24App.controller('ModalLoginPopupInstanceCtrl', function($scope, $cookieStore, $window, $location, $uibModalInstance, $state, $rootScope, $timeout, id, n, $log, authService, appService) {\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\r\n    var randomNumberOTP = Math.floor(Math.random() * 9000) + 1000;\r\n    $scope.errorMsgStatus = false;\r\n    $scope.errorErrStatus = false;\r\n    $scope.msgResult = true;\r\n    $scope.msgOTPResult = true;\r\n    $scope.msgResult1 = false;\r\n    $scope.resendvisible = false;\r\n    $scope.count = 0;\r\n    //      \r\n    $scope.countdown = function(elementName, minutes, seconds) {\r\n        var element, endTime, hours, mins, msLeft, time;\r\n\r\n        $scope.twoDigits = function(n) {\r\n            return (n <= 9 ? \"0\" + n : n);\r\n        }\r\n\r\n        $scope.updateTimer = function() {\r\n            msLeft = endTime - (+new Date);\r\n            if (msLeft < 1000) {\r\n                element.innerHTML = \" \";\r\n                document.getElementById('resend').removeAttribute(\"readonly\");\r\n                document.getElementById('resend').removeAttribute(\"disabled\");\r\n\r\n            } else {\r\n                time = new Date(msLeft);\r\n                hours = time.getUTCHours();\r\n                mins = time.getUTCMinutes();\r\n                element.innerHTML = $scope.twoDigits(time.getUTCSeconds());\r\n                setTimeout($scope.updateTimer, time.getUTCMilliseconds() + 500);\r\n            }\r\n        }\r\n\r\n        element = document.getElementById(elementName);\r\n        endTime = (+new Date) + 1000 * (60 * minutes + seconds) + 500;\r\n        $scope.updateTimer();\r\n    }\r\n\r\n\r\n    $scope.generateOPT = function(form, event) {\r\n        logger.enableLogger();\r\n        console.log(randomNumberOTP);\r\n        //console.log(form);\r\n        logger.disableLogger();\r\n        event.preventDefault();\r\n        if (form != '') {\r\n            $scope.msgResult1Msg = \"OTP is sent to your mobile number.\";\r\n            appService.verifyT24($cookieStore.get('appToken'), form, function(response) {\r\n                console.log(response);\r\n                if (response.isSuccessful == false) {\r\n                    console.log(\"err\");\r\n                    $scope.errorMsgStatus = true;\r\n                    $scope.errorMsg = \"Please enter T24 number\";\r\n                } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                    //$log.log(response.msgDesc);\r\n                    if ($scope.loggedIn == 1) {\r\n                        $scope.invisible = !s; //!authService.invisible;\r\n                        $cookieStore.put('invisible', !s);\r\n                        $cookieStore.put('userloggedIn', 0);\r\n                        authService.clearCredentials();\r\n                        $window.alert('Session Expired ! Please login again.');\r\n                        $state.go('home');\r\n\r\n                    } else {\r\n                        $window.alert('Session Expired ! Click OK to start session again');\r\n                        $state.go('home');\r\n                    }\r\n                } else {\r\n                    $scope.countdown(\"countdownValue\", 0, 20);\r\n                    $scope.countdownMsg = true;\r\n                    document.getElementById('mobileNo').setAttribute('readonly', true);\r\n\r\n                    console.log(\"response\");\r\n                    $scope.msgResult1 = true;\r\n                    $scope.errorMsgStatus = false;\r\n                    authService.sendSMS(form, randomNumberOTP, function(response) {\r\n                        //$log.info(response);\r\n                        console.log(response);\r\n                    });\r\n                    document.getElementById('generateotp').setAttribute(\"readonly\", true);\r\n                    document.getElementById('generateotp').setAttribute(\"disabled\", true);\r\n                }\r\n            });\r\n        }\r\n\r\n    };\r\n    $scope.get = function() {\r\n        /*      console.log(\"clicked\");\r\n        if(document.getElementById('mobileNo').value.length == 10){\r\n                console.log(\"clicked=========2\");\r\n        $scope.errorErrStatus = true;$scope.msgResult1 = false;\r\n        document.getElementById('generateotp').removeAttribute(\"readonly\");\r\n        }*/\r\n    }\r\n    $scope.resendOTP = function(form, event) {\r\n        event.preventDefault();\r\n\r\n        document.getElementById('resend').setAttribute(\"readonly\", true);\r\n        document.getElementById('resend').setAttribute(\"disabled\", true);\r\n        $scope.countdown(\"countdownValue\", 0, 20);\r\n        $scope.countdownMsg = true;\r\n\r\n        console.log(\"sdf\", randomNumberOTP, form);\r\n        authService.sendSMS(form, randomNumberOTP, function(response) {\r\n            //$log.info(response);\r\n            console.log(response);\r\n        });\r\n    };\r\n\r\n    $scope.registerPopUp = function(id, n) {\r\n        console.log('opening pop up');\r\n        var modalInstance = $uibModalInstance.open({\r\n            templateUrl: 'registerPopUp.html',\r\n            controller: 'ModalRegisterPopUpInstanceCtrl',\r\n            resolve: {\r\n                id: function() {\r\n                    return id;\r\n                },\r\n                n: function() {\r\n                    return n;\r\n                }\r\n            }\r\n        });\r\n        modalInstance.result.then(function(selectedItem) {\r\n            $scope.selected = selectedItem;\r\n        }, function() {\r\n\r\n        });\r\n    }\r\n\r\n    $scope.login = function() {\r\n\r\n        console.log($scope.form, randomNumberOTP);\r\n        if ($scope.form.otp == randomNumberOTP) {\r\n            appService.getProfile($scope.form.mobileNo, $cookieStore.get('appToken'), function(response) {\r\n                console.log(response.isSuccessful, id);\r\n                if (response.isSuccessful == true) {\r\n                    //$state.go('mobileRecharge');\r\n                    $scope.showMyAccount = true;\r\n                    authService.setCredentials($cookieStore.get('appToken'), response.data.custToken, $scope.form.mobileNo);\r\n                    $scope.invisible = !id;\r\n                    //authService.invisible = $scope.invisible\r\n                    $cookieStore.put('invisible', $scope.invisible);\r\n                    $cookieStore.put('userloggedIn', 1);\r\n                    console.log($scope.invisible);\r\n                    $state.go('twog');\r\n                    // $state.reload();\r\n                    //$location.path('/dashboard/twog');\r\n                    $window.location.reload();\r\n                    //$window.location.reload();\r\n                    $uibModalInstance.close(\"ok\");\r\n                } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                    //$log.log(response.msgDesc);\r\n                    if ($scope.loggedIn == 1) {\r\n                        $scope.invisible = !s; //!authService.invisible;\r\n                        $cookieStore.put('invisible', !s);\r\n                        $cookieStore.put('userloggedIn', 0);\r\n                        authService.clearCredentials();\r\n                        $window.alert('Session Expired ! Please login again.');\r\n                        $state.go('home');\r\n\r\n                    } else {\r\n                        $window.alert('Session Expired ! Click OK to start session again');\r\n                        $state.go('home');\r\n                    }\r\n                } else {\r\n                    //alert('Please register not a vaild user'); ///ng-click=\"registerPopUp(form.mobileNo)\"\r\n\r\n                    $scope.msgResult = response.isSuccessful;\r\n                    $scope.msgOTPResult = true;\r\n                    $scope.msg = response.msgDesc;\r\n                    //$uibModalInstance.close(\"ok\");\r\n                    //$scope.registerPopUp($scope.form.mobileNo);\r\n\r\n\r\n                    /*$timeout(function() {\r\n                        $scope.registerPopUp($scope.form.mobileNo);\r\n                    }, 1000);*/\r\n\r\n                };\r\n            });\r\n        } else {\r\n            console.log(\"Please Enter Correct OTP\");\r\n            $scope.msgOTPResult = false;\r\n            $scope.msgOTP = \"Please Enter Correct OTP \";\r\n\r\n        }\r\n        //$uibModalInstance.close(\"ok\");\r\n    };\r\n\r\n    // alert($('body').attr('class'));\r\n    /*if($('body').hasClass('modal-open')){\r\n        $('.navbar-toggle').addClass('collapsed');\r\n        $('.navbar-collapse').addClass('collapse');\r\n        $('.navbar-collapse').removeClass('in');\r\n    }else{\r\n        */\r\n    $('.navbar-toggle').removeClass('collapsed');\r\n    $('.navbar-collapse').addClass('in');\r\n    $('.navbar-collapse').removeClass('collapse');\r\n    // }\r\n    $scope.cancel = function() {\r\n        $uibModalInstance.dismiss('cancel');\r\n    };\r\n\r\n\r\n});\r\n\r\nt24App.controller('ModalLoginPopupHeaderInstanceCtrl', function($scope, $cookieStore, $window, $location, $uibModalInstance, $state, $rootScope, id, n, $log, authService, appService) {\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\r\n    var randomNumberOTP = Math.floor(Math.random() * 900000) + 100000;\r\n    $scope.errorMsgStatus = false;\r\n    $scope.errorErrStatus = false;\r\n    $scope.msgResult = true;\r\n    $scope.msgOTPResult = true;\r\n    $scope.msgResult1 = false;\r\n\r\n    $scope.generateOPT = function(form) {\r\n        console.log(randomNumberOTP);\r\n        console.log(form);\r\n\r\n        if (form != '') {\r\n            $scope.msgResult1Msg = \"OTP is send to your mobile number\";\r\n            appService.getProfile(form, $cookieStore.get('appToken'), function(response) {\r\n                console.log(response);\r\n                if (response.isSuccessful == true) {\r\n                    if (response.data.t24Cust == false) {\r\n                        console.log(\"err\");\r\n                        $scope.errorMsgStatus = true;\r\n                        $scope.errorMsg = \"Please Enter T24 Number\";\r\n                    } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                        //$log.log(response.msgDesc);\r\n                        if ($scope.loggedIn == 1) {\r\n                            $scope.invisible = !s; //!authService.invisible;\r\n                            $cookieStore.put('invisible', !s);\r\n                            $cookieStore.put('userloggedIn', 0);\r\n                            authService.clearCredentials();\r\n                            $window.alert('Session Expired ! Please login again.');\r\n                            $state.go('home');\r\n\r\n                        } else {\r\n                            $window.alert('Session Expired ! Click OK to start session again');\r\n                            $state.go('home');\r\n                        }\r\n                    } else {\r\n                        console.log(\"response\");\r\n                        $scope.msgResult1 = true;\r\n                        $scope.errorMsgStatus = false;\r\n                        authService.sendSMS(form, randomNumberOTP, function(response) {\r\n                            //$log.info(response);\r\n                            console.log(response);\r\n                        });\r\n                        document.getElementById('generateotp').setAttribute(\"readonly\", true);\r\n                    }\r\n                } else {\r\n                    console.log(\"eroor\");\r\n                    $scope.errorMsgStatus = true;\r\n                    $scope.errorMsg = \"Please Enter T24 Number\";\r\n                }\r\n            });\r\n        }\r\n\r\n    };\r\n    $scope.get = function() {\r\n        console.log(\"clicked\");\r\n        if (document.getElementById('mobileNo').value.length == 10) {\r\n            console.log(\"clicked=========2\");\r\n            $scope.errorErrStatus = true;\r\n            $scope.msgResult1 = false;\r\n            document.getElementById('generateotp').removeAttribute(\"readonly\");\r\n        }\r\n    }\r\n    $scope.resendOTP = function(form, event) {\r\n        event.preventDefault();\r\n        console.log(\"sdf\", randomNumberOTP, form);\r\n        authService.sendSMS(form, randomNumberOTP, function(response) {\r\n            //$log.info(response);\r\n            console.log(response);\r\n        });\r\n    };\r\n\r\n    $scope.login = function() {\r\n\r\n        console.log($scope.form, randomNumberOTP);\r\n        if ($scope.form.otp == randomNumberOTP) {\r\n            appService.getProfile($scope.form.mobileNo, $cookieStore.get('appToken'), function(response) {\r\n                console.log(response.isSuccessful, id);\r\n                if (response.isSuccessful == true) {\r\n                    //$state.go('mobileRecharge');\r\n                    $scope.showMyAccount = true;\r\n                    authService.setCredentials($rootScope.appToken, response.data.custToken, $scope.form.mobileNo);\r\n                    $scope.invisible = !id;\r\n                    //authService.invisible = $scope.invisible\r\n                    $cookieStore.put('invisible', $scope.invisible);\r\n                    $cookieStore.put('userloggedIn', 1);\r\n                    console.log($scope.invisible);\r\n                    $state.go('twog', {});\r\n                    // $state.reload();\r\n                    //$location.path('/dashboard/mobileRecharge');\r\n                    $window.location.reload();\r\n                    //$window.location.reload();\r\n                    $uibModalInstance.close(\"ok\");\r\n                } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                    //$log.log(response.msgDesc);\r\n                    if ($scope.loggedIn == 1) {\r\n                        $scope.invisible = !s; //!authService.invisible;\r\n                        $cookieStore.put('invisible', !s);\r\n                        $cookieStore.put('userloggedIn', 0);\r\n                        authService.clearCredentials();\r\n                        $window.alert('Session Expired ! Please login again.');\r\n                        $state.go('home');\r\n\r\n                    } else {\r\n                        $window.alert('Session Expired ! Click OK to start session again');\r\n                        $state.go('home');\r\n                    }\r\n                } else {\r\n                    //alert('Please register not a vaild user');\r\n                    $scope.msgResult = response.isSuccessful;\r\n                    $scope.msgOTPResult = true;\r\n                    $scope.msg = response.msgDesc;\r\n\r\n                };\r\n            });\r\n        } else {\r\n            console.log(\"Please Enter Correct OTP\");\r\n            $scope.msgOTPResult = false;\r\n            $scope.msgOTP = \"Please Enter Correct OTP \";\r\n\r\n        }\r\n        //$uibModalInstance.close(\"ok\");\r\n    };\r\n\r\n    $scope.cancel = function() {\r\n        $uibModalInstance.dismiss('cancel');\r\n    };\r\n});\r\n\r\nt24App.controller('ModalLoginPopupHeaderShopInstanceCtrl', function($scope, $cookieStore, $window, $location, $uibModalInstance, $state, $rootScope, id, n, $log, authService, appService) {\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\r\n    var randomNumberOTP = Math.floor(Math.random() * 900000) + 100000;\r\n    $scope.errorMsgStatus = false;\r\n    $scope.errorErrStatus = false;\r\n    $scope.msgResult = true;\r\n    $scope.msgOTPResult = true;\r\n    $scope.msgResult1 = false;\r\n\r\n    $scope.generateOPT = function(form) {\r\n        console.log(randomNumberOTP);\r\n        console.log(form);\r\n        if (form != '') {\r\n            $scope.msgResult1Msg = \"OTP is send to your mobile number\";\r\n            appService.getProfile(form, $cookieStore.get('appToken'), function(response) {\r\n                console.log(response);\r\n                if (response.isSuccessful == true) {\r\n                    if (response.data.t24Cust == false) {\r\n                        console.log(\"err\");\r\n                        $scope.errorMsgStatus = true;\r\n                        $scope.errorMsg = \"Please Enter T24 Number\";\r\n                    } else {\r\n                        console.log(\"response\");\r\n                        $scope.msgResult1 = true;\r\n                        $scope.errorMsgStatus = false;\r\n                        authService.sendSMS(form, randomNumberOTP, function(response) {\r\n                            //$log.info(response);\r\n                            console.log(response);\r\n                        });\r\n                        document.getElementById('generateotp').setAttribute(\"readonly\", true);\r\n                    }\r\n                } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                    //$log.log(response.msgDesc);\r\n                    if ($scope.loggedIn == 1) {\r\n                        $scope.invisible = !s; //!authService.invisible;\r\n                        $cookieStore.put('invisible', !s);\r\n                        $cookieStore.put('userloggedIn', 0);\r\n                        authService.clearCredentials();\r\n                        $window.alert('Session Expired ! Please login again.');\r\n                        $state.go('home');\r\n\r\n                    } else {\r\n                        $window.alert('Session Expired ! Click OK to start session again');\r\n                        $state.go('home');\r\n                    }\r\n                } else {\r\n                    console.log(\"eroor\");\r\n                    $scope.errorMsgStatus = true;\r\n                    $scope.errorMsg = \"Please Enter T24 Number\";\r\n                }\r\n            });\r\n        }\r\n\r\n    };\r\n    $scope.get = function() {\r\n        console.log(\"clicked\");\r\n        if (document.getElementById('mobileNo').value.length == 10) {\r\n            console.log(\"clicked=========2\");\r\n            $scope.errorErrStatus = true;\r\n            $scope.msgResult1 = false;\r\n            document.getElementById('generateotp').removeAttribute(\"readonly\");\r\n        }\r\n    }\r\n    $scope.resendOTP = function(form, event) {\r\n        event.preventDefault();\r\n        console.log(\"sdf\", randomNumberOTP, form);\r\n        authService.sendSMS(form, randomNumberOTP, function(response) {\r\n            //$log.info(response);\r\n            console.log(response);\r\n        });\r\n    };\r\n\r\n    $scope.login = function() {\r\n\r\n        console.log($scope.form, randomNumberOTP);\r\n        if ($scope.form.otp == randomNumberOTP) {\r\n            appService.getProfile($scope.form.mobileNo, $cookieStore.get('appToken'), function(response) {\r\n                console.log(response.isSuccessful, id);\r\n                if (response.isSuccessful == true) {\r\n                    //$state.go('mobileRecharge');\r\n                    $scope.showMyAccount = true;\r\n                    authService.setCredentials($rootScope.appToken, response.data.custToken, $scope.form.mobileNo);\r\n                    $scope.invisible = !id;\r\n                    //authService.invisible = $scope.invisible\r\n                    $cookieStore.put('invisible', $scope.invisible);\r\n                    $cookieStore.put('userloggedIn', 1);\r\n                    console.log($scope.invisible);\r\n                    $state.go('shop', {});\r\n                    // $state.reload();\r\n                    $location.path('/dashboard/mobileRecharge');\r\n                    $window.location.reload();\r\n                    //$window.location.reload();\r\n                    $uibModalInstance.close(\"ok\");\r\n                } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                    //$log.log(response.msgDesc);\r\n                    if ($scope.loggedIn == 1) {\r\n                        $scope.invisible = !s; //!authService.invisible;\r\n                        $cookieStore.put('invisible', !s);\r\n                        $cookieStore.put('userloggedIn', 0);\r\n                        authService.clearCredentials();\r\n                        $window.alert('Session Expired ! Please login again.');\r\n                        $state.go('home');\r\n\r\n                    } else {\r\n                        $window.alert('Session Expired ! Click OK to start session again');\r\n                        $state.go('home');\r\n                    }\r\n                } else {\r\n                    //alert('Please register not a vaild user');\r\n                    $scope.msgResult = response.isSuccessful;\r\n                    $scope.msgOTPResult = true;\r\n                    $scope.msg = response.msgDesc;\r\n\r\n                };\r\n            });\r\n        } else {\r\n            console.log(\"Please Enter Correct OTP\");\r\n            $scope.msgOTPResult = false;\r\n            $scope.msgOTP = \"Please Enter Correct OTP \";\r\n\r\n        }\r\n        //$uibModalInstance.close(\"ok\");\r\n    };\r\n\r\n    $scope.cancel = function() {\r\n        $uibModalInstance.dismiss('cancel');\r\n    };\r\n});\r\n\r\nt24App.controller('ModalRegisterPopUpInstanceCtrl', function($scope, $rootScope, $uibModalInstance, $state, id, n, $log, authService, $window, appService, $cookieStore) {\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\r\n    console.log(id);\r\n    $scope.form = { mobileNo: id };\r\n    $scope.register = function() {\r\n        $log.info($scope.form);\r\n        // var appToken = \"162C76AB09F5750CE9047BDA510B498145665805BAB816E59E6B451FEFD96EDED241E1ED8A646B4B\";\r\n        var appToken = $rootScope.appToken;\r\n        authService.registerT24($scope.form, appToken, function(response) {\r\n            console.log(response);\r\n            if (response.isSuccessful == true) {\r\n                $scope.msg = response.msgDesc;\r\n                $scope.msgResult = response.isSuccessful;\r\n                $rootScope.custToken = response.data.custToken;\r\n                authService.setCredentials(appToken, response.data.custToken);\r\n\r\n                appService.getProfile($scope.form.mobileNo, $cookieStore.get('appToken'), function(resp) {\r\n                    if (response.isSuccessful == true) {\r\n                        //$state.go('mobileRecharge');\r\n                        $scope.showMyAccount = true;\r\n                        authService.setCredentials(appToken, resp.data.custToken, $scope.form.mobileNo);\r\n                        $scope.invisible = !id;\r\n                        //authService.invisible = $scope.invisible\r\n                        $cookieStore.put('invisible', $scope.invisible);\r\n                        $cookieStore.put('userloggedIn', 1);\r\n\r\n                        $state.go('home', {});\r\n                        // $state.reload();\r\n                        //$location.path('/shop');\r\n                        $window.location.reload();\r\n                        //$window.location.reload();\r\n                        $uibModalInstance.close(\"ok\");\r\n                    }\r\n                });\r\n\r\n                setTimeout(function() {\r\n                    $uibModalInstance.close(\"ok\");\r\n                }, 1500);\r\n            } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                //$log.log(response.msgDesc);\r\n                if ($scope.loggedIn == 1) {\r\n                    $scope.invisible = !s; //!authService.invisible;\r\n                    $cookieStore.put('invisible', !s);\r\n                    $cookieStore.put('userloggedIn', 0);\r\n                    authService.clearCredentials();\r\n                    $window.alert('Session Expired ! Please login again.');\r\n                    $state.go('home');\r\n\r\n                } else {\r\n                    $window.alert('Session Expired ! Click OK to start session again');\r\n                    $state.go('home');\r\n                }\r\n            } else {\r\n                $scope.msgResult = response.isSuccessful;\r\n                $scope.msg = response.msgDesc;\r\n            }\r\n        });\r\n    };\r\n\r\n    $scope.cancel = function() {\r\n        $uibModalInstance.dismiss('cancel');\r\n    };\r\n});\r\n\r\n\r\nt24App.controller('ModalRechargePopUpInstanceCtrl', function(mobileNo, $stateParams, rechargeType, amount, operator, circle, $scope, $cookieStore, $uibModalInstance, appService, authService,$state, $rootScope) {\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n    console.log(mobileNo, rechargeType, amount, operator, circle);\r\n    $scope.form = { mobileNo: mobileNo };\r\n    $scope.form1 = { amount: amount };\r\n    $scope.errorrMsg = false;\r\n    $scope.loginerrorrMsg = false;\r\n    var appToken = $cookieStore.get('appToken'); //.currentUser.appToken;\r\n    console.log($cookieStore.get('appToken'), $cookieStore.get('globals'));\r\n    if (angular.isUndefined($cookieStore.get('globals'))) {\r\n        $scope.loginerrorrMsg = true;\r\n    } else { $scope.form = { mobileNo: $cookieStore.get('globals').currentUser.registeredID }; }\r\n\r\n    $scope.cancel = function() {\r\n        $uibModalInstance.dismiss('cancel');\r\n        return false;\r\n    };\r\n\r\n    $scope.confirm = function() {\r\n        console.log($scope.form, $scope.form1, $stateParams.promoCode);\r\n        if (angular.isUndefined($cookieStore.get('globals'))) {\r\n            $scope.loginerrorrMsg = true;\r\n            //alert('sdgf');\r\n        } else {\r\n            if (typeof $scope.form.mobileNo === \"undefined\") {\r\n                $scope.submitted = true;\r\n            } else {\r\n                appService.getProfile($scope.form.mobileNo, appToken, function(response) {\r\n                    console.log(response);\r\n                    if (response.isSuccessful == false) {\r\n                        $scope.errorrMsg = true;\r\n                    } else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                        //$log.log(response.msgDesc);\r\n                        if ($scope.loggedIn == 1) {\r\n                            $scope.invisible = !s; //!authService.invisible;\r\n                            $cookieStore.put('invisible', !s);\r\n                            $cookieStore.put('userloggedIn', 0);\r\n                            authService.clearCredentials();\r\n                            $window.alert('Session Expired ! Please login again.');\r\n                            $state.go('home');\r\n\r\n                        } else {\r\n                            $window.alert('Session Expired ! Click OK to start session again');\r\n                            $state.go('home');\r\n                        }\r\n                    } else {\r\n                        if (response.data.t24Cust === true) {\r\n                            if ($stateParams.promoCode === null) {\r\n                                $state.go('shop', { 'mobileNo': $scope.form.mobileNo, 'rechargeType': rechargeType, 'operator': operator, 'circle': circle, 'amount': $scope.form1.amount });\r\n                            }\r\n                            if ($stateParams.promoCode !== null) {\r\n                                $state.go('mobileVerifyPayShop', { 'promoCode': $stateParams.promoCode, 'mobileNo': $scope.form.mobileNo, 'rechargeType': rechargeType, 'operator': operator, 'circle': circle, 'amount': $scope.form1.amount });\r\n                            }\r\n                            $uibModalInstance.dismiss('cancel');\r\n                        } else {\r\n                            $scope.errorrMsg = true;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\r\n","responseBase64":false,"responseHeaders":{"Date":"Fri, 26 May 2017 20:00:28 GMT","Content-Encoding":"gzip","ETag":"\"aeb872feda8cd21:0\"","Last-Modified":"Wed, 22 Feb 2017 07:12:14 GMT","Server":"Microsoft-IIS/7.5","X-Powered-By":"ASP.NET","Vary":"Accept-Encoding","Content-Type":"application/x-javascript","Access-Control-Allow-Origin":"*","Accept-Ranges":"bytes","Content-Length":"5720"}}