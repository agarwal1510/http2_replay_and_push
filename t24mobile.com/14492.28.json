{"requestURL":"https://t24mobile.com/scripts/controllers/couponsCtrl.js","requestMethod":"GET","requestHeaders":{"Referer":"https://t24mobile.com/","User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36"},"responseURL":"https://t24mobile.com/scripts/controllers/couponsCtrl.js","responseStatus":200,"responseStatusText":"OK","responseProtocol":"http/1.1","responseBody":"t24App.controller('couponsCtrl', ['$scope','appService','authService','$log','$cookieStore', '$window', '$state',function($scope,appService,authService,$log,$cookieStore,$window,$state){\r\n\tconsole.log('couponsCtrl');\r\n\tvar mobileNo = $cookieStore.get('globals').currentUser.registeredID;\r\n\tvar appToken = $cookieStore.get('appToken');//$rootScope.globals.currentUser.registeredID;\r\n\tvar customToken = $cookieStore.get('globals').currentUser.customToken;\r\n\t$scope.loggedIn = $cookieStore.get('userloggedIn');\r\n\tvar s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\t\r\n\t$scope.loading = true;$scope.promoListDetailsNullData = false;\r\n\t$scope.loadGetPromoList = function(){\r\n\t\tappService.getProfile(mobileNo,appToken,function(response){\r\n\t\t\t$log.log('profile ',response);\r\n\t\t\t// $scope.customerDetails = response.data.custToken;\t\t\r\n\t\t\tappService.getMyCoupons(response.data.custToken,mobileNo,function(response){\r\n\t\t\t\t$log.log('coupons ',response);\r\n\t\t\t\tif(response.msgDesc =\"Success\"){\r\n\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t$scope.promoListDetails = response.data;\r\n\t\t\t\t\tif($scope.promoListDetails == null){$scope.promoListDetailsNullData = true;}\r\n\t\t\t\t}else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                //$log.log(response.msgDesc);\r\n                if ($scope.loggedIn == 1) {\r\n                    $scope.invisible = !s; //!authService.invisible;\r\n                    $cookieStore.put('invisible', !s);\r\n                    $cookieStore.put('userloggedIn', 0);\r\n                    authService.clearCredentials();\r\n                    $window.alert('Session Expired ! Please login again.');\r\n                    $state.go('home');\r\n\r\n                } else {\r\n                    $window.alert('Session Expired ! Click OK to start session again');\r\n                    $state.go('home');\r\n                }\r\n            }else{\r\n\t\t\t\t\tconsole.log('no coupns');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.loadGetPromoList();\r\n}]);\r\n","responseBase64":false,"responseHeaders":{"Date":"Fri, 26 May 2017 20:00:28 GMT","Content-Encoding":"gzip","ETag":"\"d07ddb78da8cd21:0\"","Last-Modified":"Wed, 22 Feb 2017 07:08:30 GMT","Server":"Microsoft-IIS/7.5","X-Powered-By":"ASP.NET","Vary":"Accept-Encoding","Content-Type":"application/x-javascript","Access-Control-Allow-Origin":"*","Accept-Ranges":"bytes","Content-Length":"884"}}