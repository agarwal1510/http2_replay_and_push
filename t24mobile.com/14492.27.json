{"requestURL":"https://t24mobile.com/scripts/controllers/transactionsCtrl.js","requestMethod":"GET","requestHeaders":{"Referer":"https://t24mobile.com/","User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.76 Safari/537.36"},"responseURL":"https://t24mobile.com/scripts/controllers/transactionsCtrl.js","responseStatus":200,"responseStatusText":"OK","responseProtocol":"http/1.1","responseBody":"t24App.controller('transactionsCtrl', ['$scope', 'appService','authService', '$log', '$cookieStore','$window', '$state', function($scope, appService, authService,$log, $cookieStore, $window, $state) {\r\n    console.log('transactionsCtrl');\r\n\r\n    var mobileNo = $cookieStore.get('globals').currentUser.registeredID;\r\n    var customToken = $cookieStore.get('globals').currentUser.customToken;\r\n    $scope.loggedIn = $cookieStore.get('userloggedIn');\r\n    var s =  $cookieStore.get('invisible');\r\n    $scope.invisible = s;\r\n\r\n    \r\n    $scope.loadGetTxnHistory = function() {\r\n        appService.getTxnHistory(customToken, mobileNo, function(response) {\r\n            $log.info(response);\r\n            if (response.isSuccessful == true) {\r\n                $scope.TxnHistoryDetails = [];\r\n                angular.forEach(response.data, function(value, key) {\r\n                    switch (value.paymentStatus) {\r\n                        case '15050':\r\n                            value.paymentStatusValue = \"Payment Successful\";\r\n                            break;\r\n                        case '15999':\r\n                            value.paymentStatusValue = \"Payment Failure\";\r\n                            break;\r\n                        case '15998':\r\n                            value.paymentStatusValue = \"Pending : Temporary Failure\";\r\n                            break;\r\n                        case '15020':\r\n                            value.paymentStatusValue = \"Invalid Transaction\";\r\n                            break;\r\n                        case '15010':\r\n                            value.paymentStatusValue = \"Processing\";\r\n                            break;\r\n                        default:\r\n                            console.log(\"payment status is not matched\");\r\n                            break;\r\n                    }\r\n                    $scope.TxnHistoryDetails.push(value);\r\n                });\r\n                /*\r\n                \t\t\tangular.forEach(response.data, function(value, key){\r\n                \t\t\t\tswitch(value.circleID){\r\n                \t\t\t\t\tcase 'CIR001': value.city = \"Delhi\";\t\t\t\t\t\t\r\n                \t\t\t\t\tbreak;\r\n                \t\t\t\t\tcase 'CIR002': value.city = \"Payment Failure\";\r\n                \t\t\t\t\tbreak;\r\n                \t\t\t\t\tcase 'CIR003': value.city = \"Pending : Temporary Failure\";\r\n                \t\t\t\t\tbreak;\r\n                \t\t\t\t\tcase 'CIR004': value.city = \"Invalid Transaction\";\r\n                \t\t\t\t\tbreak;\r\n                \t\t\t\t\tcase 'CIR005': value.city = \"Processing\";\r\n                \t\t\t\t\tbreak;\r\n                \t\t\t\t\tdefault :console.log(\"payment status is not matched\");\r\n                \t\t\t\t\tbreak;\r\n                \t\t\t\t}\r\n                \t//console.log('$scope.TxnHistoryDetails = ',value);\r\n                \t\t\t\t$scope.TxnHistoryDetails.push(value);\r\n                \t\t\t});*/\r\n\r\n                $scope.TxnHistoryDetails.reverse();\r\n            }else if (response.isSuccessful == false && response.msgDesc == 'Token is Not Valid') {\r\n                //$log.log(response.msgDesc);\r\n                if ($scope.loggedIn == 1) {\r\n                    $scope.invisible = !s; //!authService.invisible;\r\n                    $cookieStore.put('invisible', !s);\r\n                    $cookieStore.put('userloggedIn', 0);\r\n                    authService.clearCredentials();\r\n                    $window.alert('Session Expired ! Please login again.');\r\n                    $state.go('home');\r\n\r\n                } else {\r\n                    $window.alert('Session Expired ! Click OK to start session again');\r\n                    $state.go('home');\r\n                }\r\n            } else {\r\n            \t $scope.TxnHistoryDetails = 0;\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    $scope.loadGetTxnHistory();\r\n\r\n\r\n\r\n}]);\r\n","responseBase64":false,"responseHeaders":{"Date":"Fri, 26 May 2017 20:00:28 GMT","Content-Encoding":"gzip","ETag":"\"2cdf85bdb8cd21:0\"","Last-Modified":"Wed, 22 Feb 2017 07:14:51 GMT","Server":"Microsoft-IIS/7.5","X-Powered-By":"ASP.NET","Vary":"Accept-Encoding","Content-Type":"application/x-javascript","Access-Control-Allow-Origin":"*","Accept-Ranges":"bytes","Content-Length":"1119"}}